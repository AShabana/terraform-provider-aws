name: "Check Maintainer Edit Permissions"
on:
  pull_request_target:
    types:
      - opened
jobs:
  PermissionsCheck:
    env:
      MAINTAINER_CAN_MODIFY: ${{ github.event.pull_request.maintainer_can_modify }}
      ALLOW_LISTED: ${{ contains(fromJSON('["COLLABORATOR", "MEMBER", "OWNER"]'), github.event.pull_request.author_association) }}
    runs-on: ubuntu-latest
    steps:
      - name: Comment if maintainers cannot edit
        if: ${{ ( env.ALLOW_LISTED == false ) && ( env.MAINTAINER_CAN_MODIFY == false ) }}
        uses: peter-evans/create-or-update-comment@v1
        with:
          issue-number: ${{ github.event.pull_request.number }}
          body: |
            Hey @${{ github.actor }} :wave: Thank you very much for your contribution! At times, our maintainers need to make direct edits to pull requests in order to help get it ready to be merged. Your current settings do not allow maintainers to make such edits. To help facilitate this, can you update your pull request to allow such edits as described in GitHub's [Allowing changes to a pull request branch created from a fork][1] documentation?

            [1]: https://docs.github.com/en/pull-requests/collaborating-with-pull-requests/working-with-forks/allowing-changes-to-a-pull-request-branch-created-from-a-fork

